<!DOCTYPE html>
<html lang="en" class="dark">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Browse through our collection of code snippets, scripts, and tools. Find what you need or discover something new.">
<meta name="theme-color" content="#000000">
<title>Dinzo API.</title>
<link rel="icon" href="/src/icon.png" type="image/png">
<script src="https://cdn.tailwindcss.com"></script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Ubuntu+Mono:ital,wght@0,400;0,700;1,400;1,700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/styles/github-dark.min.css">
<script defer src="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/lib/highlight.min.js"></script>
<script defer src="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/lib/languages/json.min.js"></script>
<script>
tailwind.config = {
darkMode: 'class',
theme: {
extend: {
fontFamily: {
'mono': ['Ubuntu Mono', 'monospace'],
'sans': ['Inter', 'system-ui', 'sans-serif']
}
}
}
}
</script>
<style>
:root {
--background: #000000;
--foreground: #ffffff;
--card: rgba(30, 30, 30, 0.85);
--card-foreground: #ffffff;
--primary: #ffffff;
--primary-foreground: #000000;
--secondary: #555555;
--accent: #48d1cc;
--muted: #222222;
--muted-foreground: #aaaaaa;
--border: rgba(255, 255, 255, 0.1);
--radius: 0.5rem;
--shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
--shadow-lg: 0 6px 20px rgba(0, 0, 0, 0.6);
}
body {
background-color: var(--background);
color: var(--foreground);
font-family: 'Inter', sans-serif;
-webkit-font-smoothing: antialiased;
-moz-osx-font-smoothing: grayscale;
overflow-x: hidden;
}
#mouse-spotlight {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
pointer-events: none;
z-index: -1;
background: radial-gradient(600px circle at 0px 0px, rgba(255, 255, 255, 0.05), transparent 80%);
transition: background 0.1s ease-out;
}
header, .bg-card {
background-color: var(--card) !important;
backdrop-filter: blur(10px);
-webkit-backdrop-filter: blur(10px);
border-color: var(--border) !important;
box-shadow: var(--shadow);
}
.bg-card-hover:hover {
border-color: var(--primary) !important;
box-shadow: var(--shadow-lg);
transform: translateY(-3px) scale(1.02);
}
.bg-primary {
background-color: var(--primary);
color: var(--primary-foreground);
}
.bg-primary:hover {
filter: brightness(0.9);
box-shadow: var(--shadow);
}
.text-primary { color: var(--primary); }
.text-foreground { color: var(--foreground); }
.text-card-foreground { color: var(--card-foreground); }
.text-muted-foreground { color: var(--muted-foreground); }
.border-primary { border-color: var(--primary); }
.border-default { border-color: var(--border); }
::-webkit-scrollbar {
width: 8px;
}
::-webkit-scrollbar-track {
background: var(--background);
}
::-webkit-scrollbar-thumb {
background: var(--primary);
border-radius: 4px;
}
#loader {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background-color: var(--background);
display: flex;
justify-content: center;
align-items: center;
z-index: 9999;
transition: opacity 0.5s ease-out, visibility 0.5s ease-out;
}
#loader.hidden {
opacity: 0;
visibility: hidden;
}
.spinner {
width: 48px;
height: 48px;
border: 4px solid var(--border);
border-top-color: var(--primary);
border-radius: 50%;
animation: spin 1s linear infinite;
}
@keyframes spin {
to {
transform: rotate(360deg);
}
}
@keyframes fadeInUp {
from { opacity: 0; transform: translateY(20px); }
to { opacity: 1; transform: translateY(0); }
}
.animate-on-load {
opacity: 0;
animation: fadeInUp 0.6s ease-out forwards;
}
.animate-on-scroll {
opacity: 0;
transform: translateY(20px);
transition: opacity 0.6s ease-out, transform 0.6s ease-out;
transition-delay: var(--delay, 0s);
}
.animate-on-scroll.visible {
opacity: 1;
transform: translateY(0);
}
.gradient-text {
background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;
background-clip: text;
}
.feature-icon {
transition: transform 0.3s ease;
}
.bg-card-hover:hover .feature-icon {
transform: scale(1.1) rotate(-5deg);
}
.stat-item {
transition: transform 0.3s ease, box-shadow 0.3s ease, background-color 0.3s ease;
border-radius: var(--radius);
padding: 0.5rem 0;
}
.stat-item:hover {
transform: translateY(-3px);
background-color: var(--card);
box-shadow: var(--shadow);
}
.step-item {
transition: transform 0.3s ease;
}
.step-item:hover {
transform: translateX(5px);
}
.step-number {
transition: transform 0.3s ease, box-shadow 0.3s ease;
}
.step-item:hover .step-number {
transform: scale(1.1);
box-shadow: var(--shadow);
}
::-webkit-scrollbar {
display: none !important;
}
.glass {
backdrop-filter: blur(16px) saturate(180%);
background: rgba(0, 0, 0, 0.85);
border: 1px solid rgba(255, 255, 255, 0.125);
}
.loader {
width: 28px;
height: 28px;
border: 2px solid #e2e8f0;
border-top: 2px solid #4a5568;
border-radius: 50%;
animation: spin 1s linear infinite;
}
.gradient-text {
background: linear-gradient(135deg, #ffffff 0%, #cccccc 100%);
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;
background-clip: text;
}
.btn-gradient {
background: linear-gradient(135deg, #e2e8f0 0%, #4a5568 100%);
transition: all 0.3s ease;
}
.btn-gradient:hover {
transform: translateY(-1px);
box-shadow: 0 10px 25px -5px rgba(235, 235, 235, 0.4);
}
.copy-btn {
@apply text-gray-300 hover:text-white p-1 rounded-md hover:bg-gray-700 transition-colors duration-150;
}
.block-title {
@apply text-sm font-semibold text-gray-300 mb-2 flex items-center justify-between;
}
@keyframes fadeIn {
from {
opacity: 0;
transform: translateY(5px);
}
to {
opacity: 1;
transform: translateY(0);
}
}
.will-fade-in {
opacity: 0;
}
.fade-in {
animation: fadeIn 0.4s ease-out forwards;
}
@keyframes fadeOut {
from {
opacity: 1;
transform: scale(1);
}
to {
opacity: 0;
transform: scale(0.98);
}
}
.fade-out {
animation: fadeOut 0.2s ease-out forwards;
}

/* SMOOTH TOGGLE TRANSITIONS */
.smooth-toggle {
max-height: 0;
overflow: hidden;
opacity: 0;
transition: max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1), 
opacity 0.3s ease-out;
}
.smooth-toggle.expanded {
max-height: 5000px;
opacity: 1;
}

/* EXECUTE BUTTON */
.execute-button {
background-color: #ef4444;
color: white;
transition: all 0.2s ease;
border-radius: 0.375rem;
}
.execute-button:hover {
background-color: #dc2626;
transform: translateY(-1px);
box-shadow: 0 4px 12px rgba(239, 68, 68, 0.4);
}
.execute-button:active {
transform: translateY(0);
}

/* CLEAR BUTTON */
.clear-button {
transition: all 0.2s ease;
border-radius: 0.375rem;
}
.clear-button:hover {
transform: translateY(-1px);
box-shadow: 0 4px 12px rgba(255, 255, 255, 0.2);
}

/* CATEGORY AND ENDPOINT CARDS */
.category-card {
transition: all 0.2s ease;
border-radius: 0.5rem;
}
.category-card:hover {
border-color: rgba(255, 255, 255, 0.3);
box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

.endpoint-card {
transition: all 0.2s ease;
}
.endpoint-card:hover {
background-color: rgba(40, 40, 40, 0.5);
}

/* RESPONSIVE FULL WIDTH */
.max-w-2xl {
max-width: 100%;
}
.px-8 {
padding-left: 2rem;
padding-right: 2rem;
}
.container {
width: 100%;
padding-left: 2rem;
padding-right: 2rem;
}

/* BUTTON GROUPS */
.button-group {
display: flex;
gap: 0.5rem;
flex-wrap: wrap;
align-items: center;
}

/* FORM IMPROVEMENTS */
input[type="text"],
input[type="number"],
input[type="file"],
select,
textarea {
transition: all 0.2s ease;
}

input[type="text"]:focus,
input[type="number"]:focus,
input[type="file"]:focus,
select:focus,
textarea:focus {
border-color: rgba(255, 255, 255, 0.4);
box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.1);
}

/* NOTIFICATION IMPROVEMENTS */
.notification-item {
transition: all 0.3s ease;
border-radius: 0.5rem;
}
.notification-item:hover {
transform: translateX(4px);
border-color: rgba(255, 255, 255, 0.3);
}

/* RESPONSIVE ADJUSTMENTS */
@media (max-width: 768px) {
.px-8 {
padding-left: 1rem;
padding-right: 1rem;
}
.py-16 {
padding-top: 2rem;
padding-bottom: 2rem;
}
.button-group {
flex-direction: column;
width: 100%;
}
.button-group button {
width: 100%;
}
}

/* METHOD BADGE IMPROVEMENTS */
.method-badge {
display: inline-flex;
align-items: center;
justify-content: center;
min-width: 4rem;
transition: all 0.2s ease;
}

/* ICON ROTATION */
.rotate-icon {
transition: transform 0.3s ease;
}
.rotate-icon.rotated {
transform: rotate(180deg);
}
</style>
</head>
<body class="bg-gradient-to-br from-black via-gray-900 to-black text-white antialiased font-mono min-h-screen">
<div id="mouse-spotlight"></div>
<div id="loader">
<div class="spinner"></div>
</div>
<aside id="sidebar" class="fixed top-0 right-0 h-full w-64 bg-gray-900 text-white border-l border-gray-700 transform translate-x-full duration-300 ease-in-out z-[100]">
<div class="px-8 py-4 border-b border-gray-700 flex items-center justify-end">
<button id="sidebarClose" class="py-2 px-3 border border-gray-600 text-white hover:border-gray-300 flex items-center justify-center rounded">
<i class="material-icons text-xl">close</i>
</button>
</div>
<div class="p-8">
<nav>
<div class="space-y-2">
<a href="/" class="flex items-center py-2 px-4 text-sm border border-gray-600 text-gray-300 hover:border-gray-300 hover:text-white rounded transition-all">
<i class="material-icons text-lg mr-3">dashboard</i> Dashboard
</a>
</div>
<p class="text-xs text-gray-400 my-4">LINKS.</p>
<div class="space-y-2">
<a href="https://wa.me/6288242449961" target="_blank" class="flex items-center py-2 px-4 text-sm border border-gray-600 text-gray-300 hover:border-gray-300 hover:text-white rounded transition-all">
<i class="material-icons text-lg mr-3">arrow_outward</i> Contact
</a>
<a href="https://whatsapp.com/channel/0029Va4K0PZ5a245NkngBA2M" target="_blank" class="flex items-center py-2 px-4 text-sm border border-gray-600 text-gray-300 hover:border-gray-300 hover:text-white rounded transition-all">
<i class="material-icons text-lg mr-3">arrow_outward</i> Channel
</a>
</div>
</nav>
</div>
</aside>
<div id="overlay" class="fixed inset-0 bg-black bg-opacity-75 opacity-0 invisible duration-300 ease-in-out z-[90]"></div>
<header class="glass sticky top-0 z-50 border-b border-gray-700">
<div class="max-w-2xl mx-auto px-8 py-4 flex items-center justify-between">
<div class="flex gap-4 items-center">
<div class="flex flex-col gap-1">
<h2 class="text-lg text-white font-semibold leading-none">Dinzo API</h2>
<p class="text-xs text-gray-400 leading-none">API Documentation</p>
</div>
<div class="px-3 py-1.5 bg-white text-black text-xs font-semibold rounded">
v1.0
</div>
</div>
<button id="sidebarToggle" class="py-2 px-3 text-sm border border-gray-600 text-gray-300 hover:border-gray-300 flex items-center justify-center rounded transition-all">
<i class="material-icons text-xl">menu</i>
</button>
</div>
</header>
<main class="max-w-2xl mx-auto px-8 py-16">
<!-- Notifications Panel -->
<div class="mb-8">
<div class="flex items-center justify-between mb-3">
<h2 class="text-lg font-semibold text-white flex items-center">
<span class="material-icons text-xl mr-2 text-gray-400">notifications</span>
Informasi
</h2>
<span id="unread-count" class="text-xs bg-white text-black px-2 py-1 rounded hidden"></span>
</div>
<div id="notifications-list" class="space-y-2">
<!-- Notifications will be loaded here -->
</div>
</div>
<div class="flex items-center justify-between mb-4">
<div class="flex-1 relative">
<div class="absolute inset-y-0 left-0 pl-5 flex items-center pointer-events-none">
<span class="material-icons text-gray-400 text-lg">search</span>
</div>
<input type="text" id="searchInput" placeholder="Search API endpoints..." class="w-full pl-12 pr-5 py-4 text-sm border border-gray-600 bg-gray-900 text-white placeholder-gray-500 focus:outline-none focus:border-gray-300 rounded transition-all">
</div>
</div>
<div id="content" class="space-y-4">
<div id="noResults" class="text-center py-16" style="display: none;">
<div class="max-w-md mx-auto">
<h3 class="text-xs text-gray-400 mb-2">No result found.</h3>
</div>
</div>
<div id="apiList" class="space-y-3">
<!-- API list will be loaded here dynamically -->
</div>
</div>
<div class="flex flex-col mt-6 text-center">
<p class="text-gray-400 text-xs">Â© 2025 Dinzo API. | All Rights Reserved.</p>
</div>
</main>
<script>
// Hide loader after DOM loads
document.addEventListener("DOMContentLoaded", function() {
const loader = document.getElementById('loader');
loader.classList.add('hidden');
});

// Sidebar functionality
const sidebarToggle = document.getElementById('sidebarToggle');
const sidebarClose = document.getElementById('sidebarClose');
const sidebar = document.getElementById('sidebar');
const overlay = document.getElementById('overlay');

function openSidebar() {
sidebar.classList.remove('translate-x-full');
overlay.classList.remove('opacity-0', 'invisible');
document.body.classList.add('overflow-hidden');
}

function closeSidebar() {
sidebar.classList.add('translate-x-full');
overlay.classList.add('opacity-0', 'invisible');
document.body.classList.remove('overflow-hidden');
}

sidebarToggle.addEventListener('click', openSidebar);
sidebarClose.addEventListener('click', closeSidebar);
overlay.addEventListener('click', closeSidebar);

document.addEventListener('keydown', function(e) {
if (e.key === 'Escape') {
closeSidebar();
}
});

// Copy to clipboard function
async function copyToClipboard(text, buttonElement) {
if (!buttonElement) return;
const originalHTML = buttonElement.innerHTML;
try {
await navigator.clipboard.writeText(text);
buttonElement.textContent = 'Copied!';
setTimeout(() => {
buttonElement.innerHTML = originalHTML;
}, 1500);
} catch (e) {
console.error('Copy failed', e);
buttonElement.textContent = 'Failed!';
setTimeout(() => {
buttonElement.innerHTML = originalHTML;
}, 1500);
}
}

// Highlight JSON function
function hlJSON(el) {
if (window.hljs) {
hljs.highlightElement(el);
}
}

// Toggle category with smooth animation
function toggleCategory(index) {
const category = document.getElementById(`category-${index}`);
const icon = document.getElementById(`category-icon-${index}`);

category.classList.toggle('expanded');
icon.classList.toggle('rotated');
}

// Toggle endpoint with smooth animation
function toggleEndpoint(catIndex, endpointIndex) {
const endpoint = document.getElementById(`endpoint-${catIndex}-${endpointIndex}`);
const icon = document.getElementById(`endpoint-icon-${catIndex}-${endpointIndex}`);
    
endpoint.classList.toggle('expanded');
icon.classList.toggle('rotated');
}

// Execute request function
async function executeRequest(event, catIndex, endpointIndex, method, path) {
event.preventDefault();
const form = document.getElementById(`form-${catIndex}-${endpointIndex}`);
const responseDiv = document.getElementById(`response-${catIndex}-${endpointIndex}`);
const responseContent = document.getElementById(`response-content-${catIndex}-${endpointIndex}`);
const clearButton = document.getElementById(`clear-${catIndex}-${endpointIndex}`);
    
// Show response div with smooth transition
if (!responseDiv.classList.contains('expanded')) {
responseDiv.classList.add('expanded');
}

const formData = new FormData(form);
const fetchOptions = {
method: method.toUpperCase()
};
let fullPath = path;
let curlCommand = `curl -X ${fetchOptions.method} "${window.location.origin}${path}"`;

if (fetchOptions.method === 'POST' || fetchOptions.method === 'PUT' || fetchOptions.method === 'PATCH') {
fetchOptions.body = formData;
for (const [key, value] of formData.entries()) {
if (value instanceof File && value.name) {
curlCommand += ` -F "${key}=@${value.name}"`;
} else if (typeof value === 'string') {
curlCommand += ` -F "${key}=${value}"`;
}
}
} else {
const params = new URLSearchParams();
for (const [key, value] of formData.entries()) {
if (typeof value === 'string' && value) {
params.append(key, value);
}
}
const queryString = params.toString();
if (queryString) {
fullPath += (path.includes('?') ? '&' : '?') + queryString;
}
curlCommand = `curl -X ${fetchOptions.method} "${window.location.origin}${fullPath}"`;
}

const escapedFullPath = fullPath.replace(/"/g, '&quot;').replace(/'/g, "'");
const escapedCurlCommand = curlCommand.replace(/"/g, '&quot;').replace(/'/g, "'");

responseContent.innerHTML = `
<div class="space-y-4">
<div>
<h4 class="block-title">
<span><span class="material-icons text-sm mr-2 align-middle">link</span>REQUEST URL</span>
<button onclick="copyToClipboard('${window.location.origin}${escapedFullPath}', this)" class="copy-btn"><span class="material-icons text-base align-middle">content_copy</span></button>
</h4>
<pre class="bg-gray-900 text-white p-3 text-xs overflow-auto rounded"><code>${window.location.origin}${fullPath}</code></pre>
</div>
<div>
<h4 class="block-title">
<span><span class="material-icons text-sm mr-2 align-middle">terminal</span>CURL COMMAND</span>
<button onclick="copyToClipboard(this.parentElement.nextElementSibling.innerText, this)" class="copy-btn"><span class="material-icons text-base align-middle">content_copy</span></button>
</h4>
<pre class="bg-gray-900 text-white p-3 text-xs overflow-auto rounded"><code>${curlCommand}</code></pre>
</div>
<div>
<h4 class="block-title">
<span><span class="material-icons text-sm mr-2 align-middle">storage</span>SERVER RESPONSE</span>
<button onclick="copyToClipboard(document.getElementById('response-body-${catIndex}-${endpointIndex}').innerText, this)" class="copy-btn"><span class="material-icons text-base align-middle">content_copy</span></button>
</h4>
<div id="response-body-${catIndex}-${endpointIndex}" class="bg-gray-900 text-white p-3 text-xs rounded">
Loading...
</div>
</div>
</div>
`;

const responseBodyDiv = document.getElementById(`response-body-${catIndex}-${endpointIndex}`);

try {
const response = await fetch(fullPath, fetchOptions);
const contentType = response.headers.get('content-type') || '';
let responseBodyContent = '';

if (!response.ok) {
const errText = await response.text().catch(() => '');
throw new Error(`${response.status} ${response.statusText}<br>${errText}`);
}

if (contentType.includes('application/json')) {
const data = await response.json();
responseBodyContent = `<pre class="max-h-80 overflow-auto"><code class="language-json">${JSON.stringify(data, null, 2)}</code></pre>`;
setTimeout(() => hlJSON(responseBodyDiv.querySelector('code')), 0);
} else if (contentType.startsWith('image/')) {
const blob = await response.blob();
const imageUrl = URL.createObjectURL(blob);
responseBodyContent = `<img src="${imageUrl}" class="max-w-full h-auto rounded-md">`;
} else {
const text = await response.text();
responseBodyContent = `<pre class="max-h-80 overflow-auto">${text}</pre>`;
}

responseBodyDiv.innerHTML = responseBodyContent;
} catch (err) {
let errMessage = String(err);
if (err.message && err.message.startsWith('404')) {
errMessage = `Error 404: Not Found.<br>Endpoint tidak ditemukan. Pastikan URL dan parameter sudah benar.`;
}
responseBodyDiv.innerHTML = `<pre class="text-red-400 max-h-80 overflow-auto">${errMessage}</pre>`;
}

clearButton.classList.remove('hidden');
}

// Clear response function
function clearResponse(catIndex, endpointIndex) {
const responseDiv = document.getElementById(`response-${catIndex}-${endpointIndex}`);
const responseContent = document.getElementById(`response-content-${catIndex}-${endpointIndex}`);
const clearButton = document.getElementById(`clear-${catIndex}-${endpointIndex}`);
    
responseDiv.classList.add('fade-out');
clearButton.classList.add('hidden');
    
setTimeout(() => {
responseContent.innerHTML = '';
responseDiv.classList.remove('expanded', 'fade-out');
}, 200);
}

// Load and render APIs from OpenAPI spec
async function loadApis() {
const apiList = document.getElementById('apiList');
    
try {
const response = await fetch('/src/openapi.json');
const data = await response.json();

// Group endpoints by tags
const categories = {};
if (data.tags) {
data.tags.forEach(tag => {
categories[tag.name] = {
name: tag.name,
items: []
};
});
}

Object.keys(data.paths).forEach(path => {
const pathItem = data.paths[path];
Object.keys(pathItem).forEach(method => {
const endpoint = pathItem[method];
const tagName = endpoint.tags && endpoint.tags.length > 0 ? endpoint.tags[0] : 'Uncategorized';

if (!categories[tagName]) {
categories[tagName] = {
name: tagName,
items: []
};
}

categories[tagName].items.push({
path: path,
method: method.toUpperCase(),
name: endpoint.summary || 'No summary',
desc: endpoint.description || 'No description',
status: endpoint.deprecated ? 'deprecated' : 'ready',
parameters: endpoint.parameters,
requestBody: endpoint.requestBody
});
});
});

let html = '';
Object.values(categories).forEach((category, catIndex) => {
if (category.items.length === 0) return;

html += `
<div class="category-group" data-category="${category.name}">
<div class="mb-2">
<div class="bg-gray-900 border border-gray-600 category-card">
<button onclick="toggleCategory(${catIndex})" class="w-full px-4 py-3 text-left flex items-center justify-between transition-colors duration-150">
<h2 class="font-bold flex items-center text-white">
<span class="material-icons text-xl mr-4 text-black bg-white py-1 px-2 rounded">folder</span>
<span class="truncate max-w-xs text-sm text-white">${category.name}</span>
<span class="ml-2 text-xs text-gray-400">(${category.items.length})</span>
</h2>
<span class="material-icons text-white rotate-icon" id="category-icon-${catIndex}">expand_more</span>
</button>
<div id="category-${catIndex}" class="smooth-toggle">`;

category.items.forEach((item, endpointIndex) => {
const method = item.method;
const path = item.path;
const statusClasses = {
'ready': 'bg-green-500 text-white',
'deprecated': 'bg-yellow-500 text-black',
};
const statusClass = statusClasses[item.status] || 'bg-gray-600 text-white';
const methodClasses = {
'GET': 'bg-green-600',
'POST': 'bg-blue-600',
'PUT': 'bg-yellow-600',
'DELETE': 'bg-red-600'
};
const methodClass = methodClasses[method] || 'bg-gray-600';

html += `
<div id="${item.path.split('/').pop()}" class="border-t border-gray-600 api-item"
data-method="${method}"
data-path="${path}"
data-alias="${item.name}"
data-description="${item.desc}"
data-category="${category.name}">
<button onclick="toggleEndpoint(${catIndex}, ${endpointIndex})" class="w-full px-4 py-3 text-left flex items-center justify-between endpoint-card">
<div class="flex items-center min-w-0 flex-1 gap-3">
<span class="method-badge px-3 py-1.5 text-xs font-bold text-white rounded ${methodClass}">
${method}
</span>
<div class="flex flex-col min-w-0 flex-1">
<span class="font-semibold truncate font-mono text-sm text-white" title="${path}">${path}</span>
<div class="flex items-center gap-2 mt-1">
<span class="text-xs text-gray-300 truncate" title="${item.name}">${item.name}</span>
<span class="px-2 py-0.5 text-xs rounded ${statusClass}">${item.status}</span>
</div>
</div>
</div>
<span class="material-icons text-white rotate-icon flex-shrink-0" id="endpoint-icon-${catIndex}-${endpointIndex}">expand_more</span>
</button>
<div id="endpoint-${catIndex}-${endpointIndex}" class="smooth-toggle bg-gray-800 p-4 border-t border-gray-600 space-y-4">
<div class="mb-3">
<div class="text-gray-300 text-xs">${item.desc}</div>
</div>
`;

if (item.status !== 'deprecated') {
html += `
<div>
<div class="text-gray-200 font-bold text-xs mb-3 flex items-center">
<span class="material-icons text-sm mr-1">play_arrow</span>
TRY IT OUT
</div>
<div>
<form id="form-${catIndex}-${endpointIndex}" onsubmit="executeRequest(event, ${catIndex}, ${endpointIndex}, '${method}', '${path}')">
<div class="mb-4 space-y-3">`;

// Query parameters
if (item.parameters) {
item.parameters.forEach(param => {
const schema = param.schema || {};
const isReq = !!param.required;
const label = `${param.name} ${isReq ? '<span class="text-red-500">*</span>' : ''}`;
const desc = param.description ? `<div class="text-[10px] text-gray-400 mt-1">${param.description}</div>` : '';
const placeholder = (schema.example ?? schema.default ?? '') + '';

if (Array.isArray(schema.enum) && schema.enum.length) {
html += `
<div>
<label class="block text-xs font-medium text-gray-300 mb-2">${label}</label>
<select name="${param.name}" class="w-full px-3 py-2 border border-gray-600 text-sm focus:outline-none focus:border-gray-300 bg-gray-800 text-white rounded" ${isReq ? 'required' : ''}>
${schema.enum.map(v => `<option value="${String(v)}">${String(v)}</option>`).join('')}
</select>
${desc}
</div>`;
} else {
let type = 'text';
if (schema.type === 'number' || schema.type === 'integer') type = 'number';
if (schema.type === 'boolean') {
html += `
<div>
<label class="block text-xs font-medium text-gray-300 mb-2">${label}</label>
<select name="${param.name}" class="w-full px-3 py-2 border border-gray-600 text-sm focus:outline-none focus:border-gray-300 bg-gray-800 text-white rounded" ${isReq ? 'required' : ''}>
<option value="true">true</option>
<option value="false">false</option>
</select>
${desc}
</div>`;
} else {
html += `
<div>
<label class="block text-xs font-medium text-gray-300 mb-2">${label}</label>
<input type="${type}" name="${param.name}"
class="w-full px-3 py-2 border border-gray-600 text-sm focus:outline-none focus:border-gray-300 bg-gray-800 text-white placeholder:text-gray-500 rounded"
placeholder="${placeholder.replace(/"/g,'&quot;')}" ${isReq ? 'required' : ''}>
${desc}
</div>`;
}
}
});
}

// Request body
if (item.requestBody && item.requestBody.content) {
const content = item.requestBody.content;

if (content['multipart/form-data']) {
const schema = content['multipart/form-data'].schema || { properties: {} };
const required = schema.required || [];

Object.keys(schema.properties || {}).forEach(propName => {
const prop = schema.properties[propName] || {};
const isRequired = required.includes(propName);
const label = `${propName} ${isRequired ? '<span class="text-red-500">*</span>' : ''}`;
const desc = prop.description ? `<div class="text-[10px] text-gray-400 mt-1">${prop.description}</div>` : '';
const placeholder = (prop.example ?? prop.default ?? '') + '';
const isFile = prop.format === 'binary';

if (isFile) {
let accept = '';
const propDesc = (prop.description || '').toLowerCase();
if (propName.toLowerCase().includes('image') || propDesc.includes('gambar')) {
accept = 'accept="image/*"';
} else if (propName.toLowerCase().includes('video') || propDesc.includes('vidio')) {
accept = 'accept="video/*"';
}
html += `
<div>
<label class="block text-xs font-medium text-gray-300 mb-2">${label}</label>
<input type="file" name="${propName}" ${accept}
class="w-full px-3 py-2 border border-gray-600 text-sm focus:outline-none focus:border-gray-300 bg-gray-800 text-white rounded file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-gray-700 file:text-white hover:file:bg-gray-600"
${isRequired ? 'required' : ''}>
${desc}
</div>`;
} else if (Array.isArray(prop.enum) && prop.enum.length) {
html += `
<div>
<label class="block text-xs font-medium text-gray-300 mb-2">${label}</label>
<select name="${propName}" class="w-full px-3 py-2 border border-gray-600 text-sm focus:outline-none focus:border-gray-300 bg-gray-800 text-white rounded" ${isRequired ? 'required' : ''}>
${prop.enum.map(v => `<option value="${String(v)}">${String(v)}</option>`).join('')}
</select>
${desc}
</div>`;
} else if (prop.type === 'boolean') {
html += `
<div>
<label class="block text-xs font-medium text-gray-300 mb-2">${label}</label>
<select name="${propName}" class="w-full px-3 py-2 border border-gray-600 text-sm focus:outline-none focus:border-gray-300 bg-gray-800 text-white rounded" ${isRequired ? 'required' : ''}>
<option value="true">true</option>
<option value="false">false</option>
</select>
${desc}
</div>`;
} else {
let inputType = 'text';
if (prop.type === 'number' || prop.type === 'integer') {
inputType = 'number';
}
html += `
<div>
<label class="block text-xs font-medium text-gray-300 mb-2">${label}</label>
<input type="${inputType}" name="${propName}"
class="w-full px-3 py-2 border border-gray-600 text-sm focus:outline-none focus:border-gray-300 bg-gray-800 text-white placeholder:text-gray-500 rounded"
placeholder="${placeholder.replace(/"/g, '&quot;')}" ${isRequired ? 'required' : ''}>
${desc}
</div>`;
}
});
}

if (content['application/json']) {
html += `
<div>
<label class="block text-xs font-medium text-gray-300 mb-2">Body (application/json)</label>
<textarea name="__raw_json__" rows="6" class="w-full px-3 py-2 border border-gray-600 text-sm focus:outline-none focus:border-gray-300 bg-gray-800 text-white font-mono placeholder:text-gray-500 rounded" placeholder='{"key":"value"}'></textarea>
<div class="text-[10px] text-gray-400 mt-1">Masukkan JSON valid. Jika diisi, body lain akan diabaikan.</div>
</div>`;
}
}

html += `
</div>
<div class="button-group">
<button type="submit" class="execute-button font-semibold px-6 py-2.5 text-sm">
<span class="flex items-center gap-2">
<span class="material-icons text-sm">play_arrow</span>
Execute
</span>
</button>
<button type="button" id="clear-${catIndex}-${endpointIndex}" onclick="clearResponse(${catIndex}, ${endpointIndex})" class="hidden clear-button bg-white border border-gray-200 hover:border-gray-600 font-semibold text-black px-6 py-2.5 text-sm">
<span class="flex items-center gap-2">
<span class="material-icons text-sm">clear</span>
Clear
</span>
</button>
</div>
</form>
</div>
</div>`;
} else {
html += `<div class="text-yellow-400 text-xs p-3 bg-yellow-500/20 border border-yellow-500/30 rounded">Endpoint ini tidak digunakan lagi.</div>`;
}

html += `
<div id="response-${catIndex}-${endpointIndex}" class="smooth-toggle mt-4">
<div class="text-gray-200 font-bold text-xs mb-3 flex items-center">
<span class="material-icons text-sm mr-1">code</span>
RESPONSE
</div>
<div id="response-content-${catIndex}-${endpointIndex}" class="bg-gray-800 text-xs p-4 border border-gray-600 rounded">
<!-- Response will be rendered here -->
</div>
</div>

<div class="mt-4">
<div class="text-gray-200 font-bold text-xs mb-3 flex items-center">
<span class="material-icons text-sm mr-1">list</span>
HTTP STATUS CODES
</div>
<div class="bg-gray-900 border border-gray-600 rounded overflow-hidden">
<div class="overflow-x-auto">
<table class="w-full text-xs">
<thead class="bg-gray-800 border-b border-gray-600">
<tr>
<th class="px-4 py-2 text-left font-semibold text-gray-300">Code</th>
<th class="px-4 py-2 text-left font-semibold text-gray-300">Description</th>
</tr>
</thead>
<tbody class="divide-y divide-gray-600">
<tr class="hover:bg-gray-700 transition-colors">
<td class="px-4 py-2">
<div class="flex items-center gap-2">
<span class="material-icons text-green-500 text-sm">check_circle</span>
<span class="font-mono font-semibold text-green-500">200</span>
</div>
</td>
<td class="px-4 py-2 text-gray-300">OK - Request successful</td>
</tr>
<tr class="hover:bg-gray-700 transition-colors">
<td class="px-4 py-2">
<div class="flex items-center gap-2">
<span class="material-icons text-red-500 text-sm">error</span>
<span class="font-mono font-semibold text-red-500">400</span>
</div>
</td>
<td class="px-4 py-2 text-gray-300">Bad Request - Invalid parameters</td>
</tr>
<tr class="hover:bg-gray-700 transition-colors">
<td class="px-4 py-2">
<div class="flex items-center gap-2">
<span class="material-icons text-red-500 text-sm">error</span>
<span class="font-mono font-semibold text-red-500">401</span>
</div>
</td>
<td class="px-4 py-2 text-gray-300">Unauthorized - Invalid API key</td>
</tr>
<tr class="hover:bg-gray-700 transition-colors">
<td class="px-4 py-2">
<div class="flex items-center gap-2">
<span class="material-icons text-red-500 text-sm">error</span>
<span class="font-mono font-semibold text-red-500">404</span>
</div>
</td>
<td class="px-4 py-2 text-gray-300">Not Found - Resource not found</td>
</tr>
<tr class="hover:bg-gray-700 transition-colors">
<td class="px-4 py-2">
<div class="flex items-center gap-2">
<span class="material-icons text-orange-500 text-sm">warning</span>
<span class="font-mono font-semibold text-orange-500">429</span>
</div>
</td>
<td class="px-4 py-2 text-gray-300">Too Many Requests - Rate limit exceeded</td>
</tr>
<tr class="hover:bg-gray-700 transition-colors">
<td class="px-4 py-2">
<div class="flex items-center gap-2">
<span class="material-icons text-red-500 text-sm">error</span>
<span class="font-mono font-semibold text-red-500">500</span>
</div>
</td>
<td class="px-4 py-2 text-gray-300">Internal Server Error</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
`;
});

html += `</div></div></div>`;
});

apiList.innerHTML = html;

const categories = apiList.querySelectorAll('.category-group');
categories.forEach((category, index) => {
category.classList.add('will-fade-in', 'fade-in');
category.style.animationDelay = `${index * 70}ms`;
});
} catch (error) {
apiList.innerHTML = '<p class="text-red-500">Failed to load API data.</p>';
console.error('Error loading API data:', error);
}
}

// Load and render notifications
async function loadNotifications() {
const notificationsList = document.getElementById('notifications-list');
const unreadCountBadge = document.getElementById('unread-count');

try {
const response = await fetch(`/src/notifications.json?t=${Date.now()}`);
let notifications = await response.json();

if (!Array.isArray(notifications)) {
notifications = notifications ? [notifications] : [];
}

notificationsList.innerHTML = '';
let unreadCount = 0;

notifications.sort((a, b) => new Date(b.date || 0) - new Date(a.date || 0));

if (notifications.length === 0) {
notificationsList.innerHTML = '<p class="text-center text-gray-500 text-xs py-4">Tidak ada notifikasi</p>';
} else {
notifications.forEach((notif, index) => {
if (!notif.read) unreadCount++;

const notifElement = document.createElement('div');
notifElement.className = `notification-item bg-gray-900 border border-gray-600 p-4 text-xs will-fade-in fade-in ${notif.read ? 'opacity-60' : ''}`;
notifElement.style.animationDelay = `${index * 50}ms`;
notifElement.innerHTML = `
<div class="flex justify-between items-start gap-3">
<div class="flex-1 min-w-0">
<p class="font-bold text-white mb-1">${notif.title || 'Tanpa Judul'}</p>
<p class="text-gray-300">${notif.message || '-'}</p>
</div>
<div class="flex items-center flex-shrink-0 gap-2">
${!notif.read ? '<div class="w-2 h-2 bg-green-400 rounded-full" title="Unread"></div>' : ''}
<span class="text-gray-500 text-[10px]">${notif.date ? new Date(notif.date).toLocaleDateString('id-ID', { year: 'numeric', month: 'short', day: 'numeric' }) : '-'}</span>
</div>
</div>
`;
notificationsList.appendChild(notifElement);
});
}

if (unreadCount > 0) {
unreadCountBadge.textContent = unreadCount;
unreadCountBadge.classList.remove('hidden');
} else {
unreadCountBadge.classList.add('hidden');
}
} catch (error) {
console.error('Gagal memuat notifikasi:', error);
notificationsList.innerHTML = '<p class="text-center text-red-500 text-xs py-4">Gagal memuat notifikasi</p>';
unreadCountBadge.classList.add('hidden');
}
}

// Search functionality
document.getElementById('searchInput').addEventListener('input', function() {
const searchTerm = this.value.toLowerCase();
const apiItems = document.querySelectorAll('.api-item');
const categories = document.querySelectorAll('.category-group');
const noResults = document.getElementById('noResults');
let visibleCount = 0;

apiItems.forEach(item => {
const path = item.dataset.path.toLowerCase();
const alias = item.dataset.alias.toLowerCase();
const description = item.dataset.description.toLowerCase();

if (path.includes(searchTerm) || alias.includes(searchTerm) || description.includes(searchTerm)) {
item.style.display = '';
visibleCount++;
} else {
item.style.display = 'none';
}
});

categories.forEach(category => {
const visibleItems = category.querySelectorAll('.api-item[style=""]');
if (visibleItems.length > 0) {
category.style.display = '';
} else {
category.style.display = 'none';
}
});

if (visibleCount === 0) {
noResults.style.display = 'block';
} else {
noResults.style.display = 'none';
}
});

// Initial load
document.addEventListener('DOMContentLoaded', () => {
loadApis();
loadNotifications();
});
</script>
</body>
</html>
